{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":81},"end":{"line":4,"column":102,"index":183}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":232},"end":{"line":6,"column":52,"index":284}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return u}}),e.AuthProvider=function({children:u}){const[c,l]=(0,t.useState)({user:null,isLoading:!0,isAuthenticated:!1});(0,t.useEffect)(()=>{h()},[]);const h=async()=>{console.log('Checking auth status...');try{const t=await o.authApi.isAuthenticated();if(console.log('Is authenticated:',t),t){const t=await o.authApi.getCurrentUser();console.log('Found user:',t?.email),l({user:t,isLoading:!1,isAuthenticated:!!t})}else console.log('No auth token found'),l({user:null,isLoading:!1,isAuthenticated:!1})}catch(t){console.error('Auth check failed:',t),l({user:null,isLoading:!1,isAuthenticated:!1})}},A=(0,t.useCallback)(async t=>{console.log('Login called with:',t.email),l(t=>({...t,isLoading:!0}));try{console.log('Calling authApi.login...');const n=await o.authApi.login(t);console.log('Login successful, user:',n.user?.email),l({user:n.user,isLoading:!1,isAuthenticated:!0})}catch(t){throw console.error('Login failed:',t),l(t=>({...t,isLoading:!1})),t}},[]),f=(0,t.useCallback)(async()=>{l(t=>({...t,isLoading:!0}));try{await o.authApi.logout()}finally{l({user:null,isLoading:!1,isAuthenticated:!1})}},[]),L=(0,t.useCallback)(async()=>{try{return await o.authApi.checkCanLogout()}catch(t){return console.error('Failed to check logout status:',t),{can_logout:!0}}},[]),y=(0,t.useCallback)(async()=>{const t=await o.authApi.getCurrentUser();l(o=>({...o,user:t}))},[]);return(0,n.jsx)(s.Provider,{value:{...c,login:A,logout:f,refreshUser:y,checkCanLogout:L},children:u})},e.useAuth=function(){const o=(0,t.useContext)(s);if(void 0===o)throw new Error('useAuth must be used within an AuthProvider');return o};var t=r(d[0]),o=r(d[1]),n=r(d[2]);const s=(0,t.createContext)(void 0);var u=s});","lineCount":1,"map":[[1,90,151,0,"Object"],[1,97,151,0,"defineProperty"],[1,112,151,0,"e"],[1,114,151,0],[1,125,151,0,"enumerable"],[1,137,151,0],[1,139,151,0,"get"],[1,143,151,0],[1,161,151,0,"_default"],[1,162,151,0],[1,166,35,0,"e"],[1,168,35,0,"AuthProvider"],[1,181,35,7],[1,191,35,29,"children"],[1,200,35,31,"children"],[1,204,36,2],[1,210,36,9,"state"],[1,212,36,16,"setState"],[1,216,36,28],[1,218,36,28,"useState"],[1,220,36,36,"useState"],[1,230,36,48],[1,231,37,4,"user"],[1,236,37,10],[1,241,38,4,"isLoading"],[1,252,38,15],[1,254,39,4,"isAuthenticated"],[1,271,39,21],[1,276,43,2],[1,278,43,2,"useEffect"],[1,280,43,11,"useEffect"],[1,291,43,12],[1,296,44,4,"checkAuthStatus"],[1,301,45,5],[1,305,47,2],[1,311,47,8,"checkAuthStatus"],[1,313,47,26,"async"],[1,323,48,4,"console"],[1,331,48,12,"log"],[1,335,48,16],[1,362,49,4],[1,366,50,6],[1,372,50,12,"isAuth"],[1,380,50,27,"authApi"],[1,382,50,34,"authApi"],[1,390,50,35,"isAuthenticated"],[1,408,52,6],[1,411,51,6,"console"],[1,419,51,14,"log"],[1,423,51,18],[1,443,51,39,"isAuth"],[1,446,52,10,"isAuth"],[1,448,52,18],[1,449,53,8],[1,455,53,14,"user"],[1,463,53,27,"authApi"],[1,465,53,34,"authApi"],[1,473,53,35,"getCurrentUser"],[1,490,54,8,"console"],[1,498,54,16,"log"],[1,502,54,20],[1,516,54,35,"user"],[1,519,54,41,"email"],[1,526,55,8,"setState"],[1,528,55,17],[1,529,56,10,"user"],[1,536,57,10,"isLoading"],[1,547,57,21],[1,549,58,10,"isAuthenticated"],[1,567,58,29,"user"],[1,570,60,6],[1,576,61,8,"console"],[1,584,61,16,"log"],[1,588,61,20],[1,611,62,8,"setState"],[1,613,62,17],[1,614,63,10,"user"],[1,619,63,16],[1,624,64,10,"isLoading"],[1,635,64,21],[1,637,65,10,"isAuthenticated"],[1,654,65,27],[1,657,68,4],[1,658,68,6],[1,664,68,13,"error"],[1,667,69,6,"console"],[1,675,69,14,"error"],[1,681,69,20],[1,702,69,42,"error"],[1,705,70,6,"setState"],[1,707,70,15],[1,708,71,8,"user"],[1,713,71,14],[1,718,72,8,"isLoading"],[1,729,72,19],[1,731,73,8,"isAuthenticated"],[1,748,73,25],[1,751,75,4],[1,754,78,8,"login"],[1,757,78,16],[1,759,78,16,"useCallback"],[1,761,78,27,"useCallback"],[1,774,78,28,"async"],[1,784,79,4,"console"],[1,792,79,12,"log"],[1,796,79,16],[1,817,79,38,"credentials"],[1,819,79,50,"email"],[1,826,80,4,"setState"],[1,828,80,13,"prev"],[1,832,80,17],[1,836,80,27,"prev"],[1,838,80,33,"isLoading"],[1,849,80,44],[1,854,82,4],[1,858,83,6,"console"],[1,866,83,14,"log"],[1,870,83,18],[1,898,84,6],[1,904,84,12,"response"],[1,912,84,29,"authApi"],[1,914,84,36,"authApi"],[1,922,84,37,"login"],[1,928,84,43,"credentials"],[1,931,85,6,"console"],[1,939,85,14,"log"],[1,943,85,18],[1,969,85,45,"response"],[1,971,85,54,"user"],[1,977,85,60,"email"],[1,984,86,6,"setState"],[1,986,86,15],[1,987,87,8,"user"],[1,992,87,14,"response"],[1,994,87,23,"user"],[1,999,88,8,"isLoading"],[1,1010,88,19],[1,1012,89,8,"isAuthenticated"],[1,1029,89,25],[1,1032,91,4],[1,1033,91,6],[1,1039,91,13,"error"],[1,1042,94,6],[1,1048,92,6,"console"],[1,1056,92,14,"error"],[1,1062,92,20],[1,1078,92,37,"error"],[1,1081,93,6,"setState"],[1,1083,93,15,"prev"],[1,1087,93,19],[1,1091,93,29,"prev"],[1,1093,93,35,"isLoading"],[1,1104,93,46],[1,1109,94,12,"error"],[1,1110,95,4],[1,1113,96,5],[1,1117,98,8,"logout"],[1,1120,98,17],[1,1122,98,17,"useCallback"],[1,1124,98,28,"useCallback"],[1,1137,98,29,"async"],[1,1147,99,4,"setState"],[1,1149,99,13,"prev"],[1,1153,99,17],[1,1157,99,27,"prev"],[1,1159,99,33,"isLoading"],[1,1170,99,44],[1,1175,101,4],[1,1185,102,12,"authApi"],[1,1187,102,19,"authApi"],[1,1195,102,20,"logout"],[1,1203,103,4],[1,1204,103,5],[1,1212,104,6,"setState"],[1,1214,104,15],[1,1215,105,8,"user"],[1,1220,105,14],[1,1225,106,8,"isLoading"],[1,1236,106,19],[1,1238,107,8,"isAuthenticated"],[1,1255,107,25],[1,1258,109,4],[1,1261,110,5],[1,1265,112,8,"checkCanLogout"],[1,1268,112,25],[1,1270,112,25,"useCallback"],[1,1272,112,36,"useCallback"],[1,1285,112,37,"async"],[1,1295,113,4],[1,1299,115,6],[1,1312,114,29,"authApi"],[1,1314,114,36,"authApi"],[1,1322,114,37,"checkCanLogout"],[1,1338,116,4],[1,1339,116,6],[1,1345,116,13,"error"],[1,1348,119,6],[1,1355,117,6,"console"],[1,1363,117,14,"error"],[1,1369,117,20],[1,1402,117,54,"error"],[1,1405,119,13],[1,1406,119,15,"can_logout"],[1,1418,119,27],[1,1420,120,4],[1,1423,121,5],[1,1427,123,8,"refreshUser"],[1,1430,123,22],[1,1432,123,22,"useCallback"],[1,1434,123,33,"useCallback"],[1,1447,123,34,"async"],[1,1457,124,4],[1,1463,124,10,"user"],[1,1471,124,23,"authApi"],[1,1473,124,30,"authApi"],[1,1481,124,31,"getCurrentUser"],[1,1498,125,4,"setState"],[1,1500,125,13,"prev"],[1,1504,125,17],[1,1508,125,27,"prev"],[1,1510,125,33,"user"],[1,1521,126,5],[1,1525,128,2],[1,1532,129,4],[1,1534,129,4,"_reactJsxRuntime"],[1,1536,129,4,"jsx"],[1,1541,129,5,"AuthContext"],[1,1543,129,17,"Provider"],[1,1552,129,25],[1,1553,130,6,"value"],[1,1559,130,13],[1,1563,131,11,"state"],[1,1565,132,8,"login"],[1,1573,133,8,"logout"],[1,1582,134,8,"refreshUser"],[1,1596,135,8,"checkCanLogout"],[1,1614,136,8,"children"],[1,1623,138,7,"children"],[1,1626,141,0],[1,1628,143,0,"e"],[1,1630,143,0,"useAuth"],[1,1638,143,7],[1,1649,144,2],[1,1655,144,8,"context"],[1,1658,144,18],[1,1660,144,18,"useContext"],[1,1662,144,28,"useContext"],[1,1674,144,29,"AuthContext"],[1,1677,145,2],[1,1685,145,18,"undefined"],[1,1689,145,6,"context"],[1,1691,146,4],[1,1697,146,10],[1,1701,146,14,"Error"],[1,1707,146,20],[1,1754,148,2],[1,1761,148,9,"context"],[1,1762,149,0],[1,1764,4,0],[1,1768,4,0,"_react"],[1,1770,4,0,"r"],[1,1772,4,0,"d"],[1,1774,4,0],[1,1778,6,0,"_servicesApi"],[1,1780,6,0,"r"],[1,1782,6,0,"d"],[1,1784,6,0],[1,1788,6,52,"_reactJsxRuntime"],[1,1790,6,52,"r"],[1,1792,6,52,"d"],[1,1794,6,52],[1,1798,29,0],[1,1804,29,6,"AuthContext"],[1,1807,29,20],[1,1809,29,20,"createContext"],[1,1811,29,33,"createContext"],[1,1831,29,63,"undefined"],[1,1834,151,0],[1,1838,151,0,"_default"],[1,1840,151,15,"AuthContext"],[1,1841,151,27],[1,1844]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthStatus","login","setState$argument_0","logout","checkCanLogout","refreshUser","useAuth"],"mappings":"AAA;OCkC;YCQ;GDE;0BEE;GF6B;4BGE;aCE,sCD;eCa,uCD;GHG;6BKE;aDC,sCC;GLW;qCME;GNS;kCOE;aHE,2BG;GPC;CDe;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}